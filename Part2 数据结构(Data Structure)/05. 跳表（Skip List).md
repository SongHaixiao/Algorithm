# 跳表 （Skip List）

[toc]

## 定义

跳表（Skip List）是一种随机化的数据， 由 William Pugh 在论文《Skip lists: a probabilistic alternative to balanced trees》中提出， 跳表以有序的方式在层次化的链表中保存元素。

它是各方面性能都比较优秀的 **动态数据结构**，可以支持快速地插入、删除、查找操作，写起来也不复杂，甚至可以替代 **红黑树 （Red-Black Tree)(平衡树）**.

<img src="../Resources1/08.jpg" alt="Figure" style="zoom:50%;" />

成分说明：

- 表头（head）：负责维护跳跃表的节点指针。
  
- 跳跃表节点：保存着元素值，以及多个层。

- 层：保存着指向其他元素的指针。高层的指针越过的元素数量大于等于低层的指针，为了提高查找的效率，程序总是从高层先开始访问，然后随着元素值范围的缩小，慢慢降低层次。

- 表尾：全部由 NULL 组成，表示跳跃表的末尾。


## 理解 跳表 

对于 **单链表**，即便链表中存储的数据是有序的，如果要在其中查找某个苏剧，也只能从头到尾遍历链表。这样查询效率会很低，时间复杂度会很高，是 $O(n)$.

<img src="../Resources1/04.jpg" alt="Figure" style="zoom:50%;" />

### 为提高效率，对链表建立一级"索引"

每两个节点提取一个节点到上一级，把抽出来的那一级叫做 **索引** 或 **索引层**。

<img src="../Resources1/05.jpg" alt="Figure" style="zoom:50%;" />

其中，down 表示 down 指针，指向下一级结点。

如果现在要查找 16 节点，可以先在索引层遍历，当遍历到索引层中值为 13 的结点时，发现下一个节点是 17，那要查找的节点 16 肯定就在这两个节点之间。

然后，通过索引层节点的 down 指针，下降到原始链表这一层，继续遍历。

这时，只需要再遍历 2 个节点，就可以找到值等于 16 的这个节点。

这样，原来要查找 16，需要遍历 10 个节点，现在只需要遍历 7 个节点。

由此可以看出，**加来一层索引之后，查找一个节点需要遍历的节点个数减少了，也就是查找效率提高了。**

### 建立二级索引

在第一级索引的基础之上，每两个节点就抽出一个节点到第二级索引。

<img src="../Resources1/06.jpg" alt="Figure" style="zoom:50%;" />

现在，查找 16 节点，只需要遍历 6 个节点（1,7,13, down 13, down 13, 16), 需要遍历的节点数量又减少了。

### 感受多级索引提升的查询效率

包含 64 个节点的链表，并按照在之前索引的基础上，每两个节点就抽出一个节点到上级节点方法，建立了五级索引.

<img src="../Resources1/07.jpg" alt="Figure" style="zoom:50%;" />

现在，查找 62 节点：

- 没有索引 ： 遍历 62 个节点
- 有索引   ： 遍历 11 个节点。

## 分析 跳表



